<!-- Chat Suporte Organização de Dados - Versão local automática melhorada -->
 <style>
    /* Seu CSS original (mantive tudo igual) */
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f2f4f7;
      margin: 0;
      padding: 0;
      font-size: 18px;
    }

    .container {
      max-width: 750px;
      margin: 3rem auto;
      background: white;
      padding: 2.5rem;
      border-radius: 15px;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 2rem;
      font-size: 2rem;
    }

    label {
      display: block;
      margin-top: 1.5rem;
      font-weight: bold;
      color: #34495e;
    }

    select, textarea {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1.1rem;
      background: #fefefe;
      margin-top: 0.4rem;
    }

    .tooltip-container {
      position: relative;
      display: inline-block;
      cursor: help;
      margin-left: 6px;
    }

    .tooltip-text {
      visibility: hidden;
      width: 250px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 8px 12px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -125px;
      opacity: 0;
      transition: opacity 0.2s;
      font-size: 0.95rem;
    }

    .tooltip-container:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }

    .info-tooltip {
      font-size: 1.2rem;
      color: #007bff;
    }

    .star-rating {
      display: flex;
      margin-top: 0.6rem;
      gap: 0.6rem;
      font-size: 2rem;
      cursor: pointer;
    }

    .star {
      color: #ccc;
      transition: color 0.2s;
    }

    .star.selecionada {
      color: gold;
    }

    button {
      margin-top: 2rem;
      padding: 1rem 1.8rem;
      font-size: 1.1rem;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }

    button:hover {
      background-color: #218838;
      transform: scale(1.02);
    }

    .avaliacoes {
      margin-top: 2.5rem;
    }

    .avaliacao-card {
      padding: 1.2rem;
      margin-top: 1.2rem;
      background: #f9f9f9;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
      position: relative;
    }

    .comentario-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .comentario-body {
      margin-top: 0.5rem;
    }

    .acoes {
      display: flex;
      gap: 0.5rem;
    }

    .acao-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      color: #444;
      position: relative;
    }

    .acao-btn:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.85rem;
      white-space: nowrap;
    }

    .editado-info {
      font-size: 0.8rem;
      color: #888;
      margin-top: 4px;
    }

    .textarea-edit {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      margin-top: 0.5rem;
      border-radius: 5px;
    }

    .salvar-btn {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 0.4rem 0.8rem;
      border-radius: 5px;
      margin-top: 0.5rem;
      cursor: pointer;
    }

    .back-btn {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background-color: #007bff;
      color: white;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s;
    }

    .back-btn:hover {
      opacity: 1;
    }
  </style>
<div id="chatWrapper" style="position: fixed; bottom: 20px; right: 20px; width: 350px; font-family: 'Segoe UI', Tahoma, sans-serif; z-index: 9999;">
  <div id="chatContainer" style="background:#fff; border-radius:8px 8px 0 0; box-shadow: 0 5px 15px rgba(0,0,0,0.1); display:flex; flex-direction:column; height: 480px;">
    <div id="chatHeader" style="background:#2c3e50; color:#fff; padding:12px 15px; cursor:pointer; display:flex; justify-content: space-between; align-items:center;">
      <div style="font-weight:600; font-size:15px;">Suporte Técnico - Dados</div>
      <button id="chatToggleBtn" style="background:none; border:none; color:#fff; font-size:20px; cursor:pointer;">–</button>
    </div>
    <div id="chatMessages" style="flex:1; padding:15px; overflow-y:auto; background:#f5f7fa; font-size:14px; line-height:1.4;"></div>
    <div style="padding:10px; border-top:1px solid #e2e8f0; background:#fff;">
      <input id="chatInput" type="text" placeholder="Digite sua mensagem..." autocomplete="off" style="width:100%; padding:10px 12px; border:1px solid #ddd; border-radius:20px; font-size:14px; outline:none;">
    </div>
  </div>
</div>
<button class="back-btn" onclick="window.location.href='home.html';">Voltar para a Home</button>
<head>
<link rel="stylesheet" href="../../assets/css/home.css" />
  <script src="../../assets/js/login.js"></script>
  
</head>
<body>
  <header>
     <ul>
            <li><a href="../post/post_index.html">seus posts</a></li>
      </ul>
      
      <ul>
            <li><a href="avaliar_post_e_comentar_novo.html">Criar comentario</a></li>
      </ul>
      
    <h1>Bem-vindo</h1>
    <ul>
          <li><a href="chat_de_suporte_ao_usuario_novo.html">Suporte</a></li>
    </ul>
    <a href="../paginausuarios/perfil.html" id="user-name-link">Usuário</a>
  </header>
<script>
(() => {
  const chatContainer = document.getElementById('chatContainer');
  const chatMessages = document.getElementById('chatMessages');
  const chatInput = document.getElementById('chatInput');
  const chatToggleBtn = document.getElementById('chatToggleBtn');

  let isMinimized = false;

  // Função para formatar horário atual (HH:MM)
  function getCurrentTime() {
    const now = new Date();
    return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  }

  // Cria elemento mensagem
  function createMessageElement(text, isUser = false) {
    const msgDiv = document.createElement('div');
    msgDiv.style.marginBottom = '12px';
    msgDiv.style.maxWidth = '80%';
    msgDiv.style.padding = '8px 12px';
    msgDiv.style.borderRadius = '12px';
    msgDiv.style.fontSize = '13px';
    msgDiv.style.position = 'relative';
    msgDiv.style.animation = 'fadeIn 0.3s ease-in';
    msgDiv.style.wordWrap = 'break-word';
    msgDiv.style.backgroundColor = isUser ? '#e3f2fd' : '#edf2f7';
    msgDiv.style.alignSelf = isUser ? 'flex-end' : 'flex-start';
    msgDiv.style.borderBottomRightRadius = isUser ? '4px' : '12px';
    msgDiv.style.borderBottomLeftRadius = isUser ? '12px' : '4px';

    msgDiv.textContent = text;

    const timeDiv = document.createElement('div');
    timeDiv.style.fontSize = '10px';
    timeDiv.style.color = '#666';
    timeDiv.style.marginTop = '4px';
    timeDiv.style.textAlign = 'right';
    timeDiv.textContent = getCurrentTime();

    msgDiv.appendChild(document.createElement('br'));
    msgDiv.appendChild(timeDiv);

    return msgDiv;
  }

  // Indicador "digitando..."
  function createTypingIndicator() {
    const typingDiv = document.createElement('div');
    typingDiv.style.marginBottom = '12px';
    typingDiv.style.maxWidth = '80%';
    typingDiv.style.padding = '8px 12px';
    typingDiv.style.borderRadius = '12px';
    typingDiv.style.fontSize = '13px';
    typingDiv.style.position = 'relative';
    typingDiv.style.backgroundColor = '#edf2f7';
    typingDiv.style.alignSelf = 'flex-start';
    typingDiv.style.borderBottomLeftRadius = '4px';

    const textSpan = document.createElement('span');
    textSpan.textContent = 'Carlos está digitando';

    const dotsSpan = document.createElement('span');
    dotsSpan.style.display = 'inline-block';
    dotsSpan.style.marginLeft = '8px';

    for (let i = 0; i < 3; i++) {
      const dot = document.createElement('span');
      dot.style.display = 'inline-block';
      dot.style.width = '6px';
      dot.style.height = '6px';
      dot.style.marginRight = i < 2 ? '4px' : '0';
      dot.style.borderRadius = '50%';
      dot.style.backgroundColor = '#666';
      dot.style.animation = `typingAnimation 1.4s ${i * 0.3}s infinite ease-in-out`;
      dotsSpan.appendChild(dot);
    }

    typingDiv.appendChild(textSpan);
    typingDiv.appendChild(dotsSpan);

    return typingDiv;
  }

  // Regras e respostas baseadas em palavras-chave
  function generateResponse(userText) {
    const text = userText.toLowerCase();

    // Respostas para duplicados
    if (text.includes('duplicad') || text.includes('repeti')) {
      const options = [
        "Dados duplicados podem atrapalhar muito a análise! Uma boa prática é usar ferramentas como Excel para remover duplicatas, ou scripts em Python com pandas para filtrá-los.",
        "Para evitar duplicados, costumo criar uma chave única baseada em campos essenciais, como CPF + data, e depois filtrar registros repetidos. Quer que eu te explique como fazer isso?",
        "Uma dica prática: ao invés de deletar direto, marque os dados duplicados para revisar manualmente antes de apagar. Isso evita perdas acidentais."
      ];
      return options[Math.floor(Math.random() * options.length)];
    }

    // Respostas para formatação de datas/hora
    if (text.includes('format') || text.includes('data') || text.includes('hora')) {
      const options = [
        "Recomendo usar o padrão ISO 8601 para datas: YYYY-MM-DD, e horário no formato 24h para evitar confusões.",
        "Formato consistente de datas facilita a integração entre sistemas. Já pensou em padronizar o formato em todas as bases?",
        "Se precisar de ajuda para formatar datas em Excel, SQL ou Python, posso te dar exemplos práticos."
      ];
      return options[Math.floor(Math.random() * options.length)];
    }

    // Respostas para integração de dados
    if (text.includes('integr') || text.includes('unir') || text.includes('fontes')) {
      const options = [
        "Para integrar dados de diferentes fontes, comece mapeando os campos equivalentes entre sistemas. Você está trabalhando com bancos SQL, planilhas, APIs?",
        "Integração é um dos maiores desafios, mas usar ETL e ferramentas de automação ajudam bastante. Quer dicas sobre ferramentas específicas?",
        "Fazer uma documentação clara dos campos e formatos ajuda a evitar erros na integração."
      ];
      return options[Math.floor(Math.random() * options.length)];
    }

    // Respostas para validação e qualidade de dados
    if (text.includes('valid') || text.includes('qualidad') || text.includes('limp')) {
      const options = [
        "Validar dados na entrada evita problemas futuros. Use regras como campos obrigatórios, formatos e faixas válidas.",
        "Uma boa limpeza e validação periódica mantém os dados confiáveis. Posso te ajudar com listas de validação se quiser.",
        "Automatizar a validação com scripts e rotinas periódicas é uma ótima prática para manter qualidade."
      ];
      return options[Math.floor(Math.random() * options.length)];
    }

    // Respostas para desempenho e organização
    if (text.includes('desempenho') || text.includes('rapidez') || text.includes('eficiênc')) {
      const options = [
        "Organizar os dados corretamente melhora muito o desempenho dos sistemas e relatórios.",
        "Indexar corretamente tabelas e evitar redundâncias ajuda a acelerar consultas.",
        "Documentar processos e rotinas de dados garante que a equipe trabalhe de forma eficiente."
      ];
      return options[Math.floor(Math.random() * options.length)];
    }

    // Respostas para governança e segurança
    if (text.includes('seguran') || text.includes('governança') || text.includes('privacidad')) {
      const options = [
        "Governança de dados é essencial para garantir qualidade, segurança e conformidade com leis.",
        "Defina claramente quem pode acessar e modificar dados para evitar problemas de segurança.",
        "Auditorias e logs são importantes para rastrear alterações e manter a integridade."
      ];
      return options[Math.floor(Math.random() * options.length)];
    }

    // Respostas genéricas e fallback
    const genericResponses = [
      "Interessante sua pergunta! Pode me dar mais detalhes para eu te ajudar melhor?",
      "Pode explicar um pouco mais o que você está enfrentando para que eu possa sugerir uma solução?",
      "Já trabalhei com temas parecidos. Quer que eu te explique algumas práticas recomendadas?",
      "Vou fazer o meu melhor para te ajudar. Qual parte você quer focar mais: limpeza, integração ou validação?"
    ];
    return genericResponses[Math.floor(Math.random() * genericResponses.length)];
  }

  // Adiciona mensagem no chat
  function addMessage(text, isUser = false) {
    const msgEl = createMessageElement(text, isUser);
    chatMessages.appendChild(msgEl);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  // Envia a mensagem do usuário e gera resposta automática
  function sendMessage() {
    const text = chatInput.value.trim();
    if (!text) return;

    addMessage(text, true);
    chatInput.value = '';
    chatInput.disabled = true;

    // Simula "digitando..."
    const typingEl = createTypingIndicator();
    chatMessages.appendChild(typingEl);
    chatMessages.scrollTop = chatMessages.scrollHeight;

    setTimeout(() => {
      chatMessages.removeChild(typingEl);
      const response = generateResponse(text);
      addMessage(response, false);
      chatInput.disabled = false;
      chatInput.focus();
    }, 1500 + Math.random() * 1500);
  }

  // Toggle minimizar/expandir chat
  chatToggleBtn.addEventListener('click', () => {
    isMinimized = !isMinimized;
    if (isMinimized) {
      chatContainer.style.height = '40px';
      chatMessages.style.display = 'none';
      chatInput.parentElement.style.display = 'none';
      chatToggleBtn.textContent = '+';
    } else {
      chatContainer.style.height = '480px';
      chatMessages.style.display = 'block';
      chatInput.parentElement.style.display = 'block';
      chatToggleBtn.textContent = '–';
      chatInput.focus();
    }
  });

  // Envia mensagem ao apertar Enter
  chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      sendMessage();
    }
  });

  // Mensagem inicial de boas-vindas
  addMessage("Olá! Sou o Carlos, especialista em organização de dados. Como posso ajudar você hoje?");

  // Foco inicial
  chatInput.focus();

  // Animação para "digitando"
  const style = document.createElement('style');
  style.textContent = `
  @keyframes typingAnimation {
    0%, 60%, 100% { transform: translateY(0); }
    30% { transform: translateY(-5px); }
  }
  `;
  document.head.appendChild(style);
})();
</script>
